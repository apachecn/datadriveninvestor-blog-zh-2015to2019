# ç”¨äº Keras çš„çƒ§ç“¶ API

> åŸæ–‡ï¼š<https://medium.datadriveninvestor.com/flask-api-for-keras-87c06da174e8?source=collection_archive---------3----------------------->

> ä½¿ç”¨ Flask åœ¨ 5 åˆ†é’Ÿå†…éƒ¨ç½²æ‚¨çš„ ML æ¨¡å‹ï¼

![](img/61a7b2681a30026e90e04f4bf60a41aa.png)

Photo by [Fabienne HÃ¼bener](https://unsplash.com/@saimiri_sciureus?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

åœ¨å®Œæˆäº†æœºå™¨å­¦ä¹ éƒ¨åˆ†æ¶‰åŠçš„æ‰€æœ‰ R&D ä¹‹åï¼Œèƒ½å¤Ÿéƒ¨ç½²æ‚¨çš„æ¨¡å‹å¹¶ä½¿å…¶ä½œä¸ºæœåŠ¡å¯ç”¨æ˜¯å¾ˆå¥½çš„ã€‚

ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬å°†éƒ¨ç½²ä¸€ä¸ªåŸºäº*å¼‚æˆ–*é—®é¢˜çš„ç®€å• Keras æ¨¡å‹ã€‚

# å…ˆå†³æ¡ä»¶

```
pip install tensorflow keras flask
```

# å…‹æ‹‰æ–¯

å¸Œæœ›ä½ èƒ½å¾ˆå®¹æ˜“ç†è§£è¿™æ®µä»£ç ã€‚

## å¼€å§‹è®­ç»ƒ

```
python medium_flask_keras_.py
```

è®­ç»ƒä¹‹åï¼Œåˆ›å»ºä¸€ä¸ª **xor_model** æ–‡ä»¶ã€‚å®ƒåŒ…å«æ¨¡å‹åŠå…¶æƒé‡ã€‚

# ç“¶

è®©æˆ‘ä»¬ä½¿ç”¨ Flask åˆ›å»ºä¸€ä¸ª APIï¼Œä»¥ä¾¿é€šè¿‡ HTTP è¯·æ±‚è½»æ¾è®¿é—®æ¨¡å‹ã€‚

`def predict()`å¤„ç†ä¸¤ä¸ª **GET** å’Œ **POST** è¯·æ±‚ï¼Œä½†æ˜¯ä½ åªèƒ½åšæŒä¸€ä¸ªã€‚å¦‚æœæ²¡æœ‰æŒ‡å®š`methods`ï¼Œé»˜è®¤æƒ…å†µä¸‹å®ƒå¤„ç† GET è¯·æ±‚ã€‚

`with graph.as_default()`æ˜¯å¿…éœ€çš„ï¼Œå› ä¸º Keras ä¸­æœ‰ä¸€ä¸ª bugï¼Œå½“ç”¨ Flask çº¿ç¨‹äº¤å‰æ—¶ã€‚

å¦‚æœæ‚¨å¸Œæœ›ä»æœ¬åœ°ç½‘ç»œå¤–éƒ¨è®¿é—®æ‚¨çš„æœåŠ¡å™¨ï¼Œåˆ™éœ€è¦`host='0.0.0.0'`ã€‚ä¹Ÿä¸è¦å¿˜è®°ç«¯å£è½¬å‘ã€‚

## å¯åŠ¨æœåŠ¡å™¨

```
python medium_flask_keras_server.py
```

# æµ‹è¯•æˆ‘ä»¬çš„é…ç½®

æ‚¨å¯ä»¥ä½¿ç”¨ web æµè§ˆå™¨å‘å‡º GET è¯·æ±‚ã€‚åªéœ€è®¿é—®ä»¥ä¸‹ URL:

> [http://your _ server _ address:5000/é¢„æµ‹ï¼Ÿa=0 & b=1](http://your_server_address:5000/predict?a=0&b=1)

ç»“æœåº”è¯¥ç±»ä¼¼äº:

```
{"result":[0.9952542781829834]}
```

## å°±æ˜¯è¿™æ ·ï¼

## å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« â€”â€”æˆ‘çœŸçš„å¾ˆæ„Ÿæ¿€ä½ ç‚¹å‡»é¼“æŒæŒ‰é’®ï¼Œè¿™å°†å¯¹æˆ‘æœ‰å¾ˆå¤§å¸®åŠ©ã€‚å’Œå¹³ï¼ğŸ˜